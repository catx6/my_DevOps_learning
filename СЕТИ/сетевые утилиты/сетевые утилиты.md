| Утилита                        | Назначение                       | Пример                              |
| ------------------------------ | -------------------------------- | ----------------------------------- |
| **ping**                       | Проверка доступности узла (ICMP) | `ping 8.8.8.8`                      |
| **traceroute** / **tracepath** | Путь пакета до хоста             | `traceroute google.com`             |
| **nslookup** / **dig**         | DNS-запросы и анализ доменов     | `dig google.com A`                  |
| **ifconfig** / **ip addr**     | Просмотр и настройка интерфейсов | `ip addr show`                      |
| **ip route**                   | Просмотр маршрутов               | `ip route show`                     |
| **[[netstat]]** / **ss**       | Сетевые соединения и порты       | `ss -tuln`                          |
| **curl**                       | Отправка HTTP-запросов           | `curl -I https://google.com`        |
| **wget**                       | Загрузка файлов по HTTP/HTTPS    | `wget https://example.com/file.zip` |
| **scp**                        | Копирование файлов по SSH        | `scp file user@host:/path/`         |
| **ssh**                        | Подключение к удалённому серверу | `ssh user@ip`                       |

------

|Утилита|Назначение|Пример|
|---|---|---|
|**nmap**|Сканирование портов и сервисов|`nmap -sV 192.168.0.1`|
|**tcpdump**|Захват пакетов (анализ трафика)|`tcpdump -i eth0 port 80`|
|**ethtool**|Состояние и настройки интерфейса|`ethtool eth0`|
|**arp** / **ip neigh**|ARP-таблица (соответствие IP↔MAC)|`ip neigh show`|
|**route**|Таблица маршрутизации (устар., но встречается)|`route -n`|
|**hostnamectl**|Настройка имени хоста|`hostnamectl set-hostname srv1`|
|**mtr**|Совмещает ping и traceroute в реальном времени|`mtr google.com`|
|**telnet**|Проверка TCP соединения к порту|`telnet example.com 80`|
|**nc (netcat)**|TCP/UDP соединения, тест портов, мини-сервер|`nc -l 8080`|
|**lsof -i**|Какие процессы слушают порты|`lsof -i :22`|

-----

|Утилита|Назначение|Пример|
|---|---|---|
|**iftop**|Мониторинг сетевого трафика в реальном времени|`iftop -i eth0`|
|**iptraf-ng**|Подробная статистика по соединениям|`iptraf-ng`|
|**bmon**|Графики сетевой активности|`bmon`|
|**ssldump**|Анализ SSL/TLS соединений|`ssldump -i eth0`|
|**whois**|Информация о домене/IP|`whois google.com`|
|**speedtest-cli**|Проверка скорости интернета|`speedtest-cli`|
|**arping**|Тест связи на уровне Ethernet (ARP)|`arping 192.168.1.1`|
|**conntrack**|Состояние NAT/соединений ядра|`conntrack -L`|
|**iperf3**|Тест пропускной способности сети|`iperf3 -c server_ip`|
|**vnstat**|Учёт трафика по интерфейсам|`vnstat -l -i eth0`|
|**nload**|Реальное потребление вход/выход трафика|`nload`|
|**hping3**|Отправка TCP/UDP/ICMP пакетов вручную (тест фаервола)|`hping3 -S -p 80 google.com`|
|**ss** (с ключами)|Глубокий анализ TCP состояний|`ss -tanp`|
|**tshark**|CLI-версия Wireshark|`tshark -i eth0 -f "tcp port 80"`|

### wireshark фильтры

ip.addr == 192.168.0.1 - пакеты от\к IP
ip.src == IP - исходящий трафик
ip.dst == IP - входящий трафик
tcp.port == 80 - любое направление по 80 порту
tcp.srcport == 22 - исходящий трафик по 22 порту
tcp.dstport == 443 - запросы на 443 порт
eth.addr == aa:bb:cc:dd:ee:ff
!(tcp.port == 22) - исключение все кроме 22 порта

----

http - трафик
http.request.method == "GET" - запросы get
http.request.method == "POST" - post
http.response - только ответы
http.host == "site.com"
http.request.uri contains "/login" - по хосту
http.user_agent contains "curl" - пользовательский агент

| Назначение                      | Фильтр                                      |
| ------------------------------- | ------------------------------------------- |
| TCP-пакеты                      | `tcp`                                       |
| UDP-пакеты                      | `udp`                                       |
| Только установленные соединения | `tcp.flags.syn == 1 and tcp.flags.ack == 1` |
| Только SYN                      | `tcp.flags.syn == 1 and tcp.flags.ack == 0` |
| Только FIN                      | `tcp.flags.fin == 1`                        |
| Только RST                      | `tcp.flags.reset == 1`                      |
| Потерянные пакеты               | `tcp.analysis.lost_segment`                 |
| Повторная передача              | `tcp.analysis.retransmission`               |
| Задержки ACK                    | `tcp.analysis.ack_rtt`                      |
| Полезная нагрузка               | `tcp.len > 0`                               |

----

```bash
# Быстро проверить, слушает ли порт
ss -ltnp | grep 8080

# Проверить DNS с таймингом
dig +trace google.com

# Проверить соединение без браузера
curl -v https://example.com

# Сканировать порты сервера
nmap -Pn -p 1-1024 192.168.1.10

# Смотреть кто забил сеть
iftop -i eth0
```

-----

### как работает traceroute

- программа отправляет пакет с постепенно увеличивающимся TTL
- каждый маршрутизатор по пути уменьшает TTL(time to live) на 1
- когда TTL становится 0 маршрутизатор отправляет обратно ICMP "Time Exceeded"
- таким образом `traceroute` получает ip каждого узла через который проходит пакет
- когда пакет достигает конечного хоста тот отвечает ICMP Echo Reply 
или порт недоступен

----

### как работает ping
1. клиент отправляет ICMP Echo Request пакет на ip-адресс цели
2. сервер отвечает ICMP Echo Reply
3. `ping` измеряет время между запрсоом и ответом это RTT round trip time