 каждый день я буду разбирать хотябы 1 вопрос начиная с 26.10.2025
из [devops_interview](https://github.com/Swfuse/devops-interview/blob/main/interview.md)
[частота опроса вопросов](https://docs.google.com/spreadsheets/d/1WPOMAkQFL1zkAC6Uvt5lk7lwpeNkVaaaX07OPyzu0fk/edit?gid=0#gid=0)


#### 25.10.2025
- Что такое load average? Что показывает эта метрика? Почему load average состоит из трёх значений?
Load Average - это средняя нагрузка на систему за определнный промежуток времени она показывает среднее кол-во процессов которые выполняют или ожидают выполнения 

`uptime` - показывает:
`01:46:31 up 10:03,  1 user,  load average: 0.45, 0.62, 0.50`

`cat /proc/loadavg` - `0.45 0.60 0.50 2/751 28513`

---
#### почему 3 значения

| позиция | интервал | что показывает                         |
| ------- | -------- | -------------------------------------- |
| 1-e     | 1 минута | средняя нагрузка за последнюю минуту   |
| 2-e     | 5 минут  | средняя нагрузка за последние 5 минут  |
| 3-e     | 15 минут | средняя нагрузка за последние 15 минут |
#### как интерпритировать значения
чтобы понять много это или мало нужно сравнить с кол-во CPU(ядер)
если у тебя 4-ядра:
- load average 4.00 -> система загружена 100%
- load average 8.00 -> процессоров не хватает
- load average 2.00 -> система справляется


---

#### примеры анализа

`load average: 0.50, 1.20, 2.50` - нагрузка за минуту снизилась
если loadavg < кол-во ядер это хорошо
если loadavg > кол-во ядер это завышенная нагрузка

----

#### 27.10.2025
 - описать архитектуру кластера `kubernetes`
1. control panel
управляющая плоскость - отвечает за управление и отслеживание состояния кластера обычно являются `master` узлом
Основные компоненты **Control panel:**
1.1 **kube-apiserver**
- Главная точка входа в кластер
- обрабатывает REST-запросы от пользователей, компонентов и внешних систем
- отвечает за валидацию и конфигурацию данных объектов API (Pods, Services  и т.д)
- Горизонтальное масштубируемый
1.2 **etcd**
- распределенное отказоустойчивое хранилище, ключ-значение
- хранит все состояние кластера(конфигурации, состояния объектов и т.д)
- является единственным источником истинны для всего кластера
1.3 **kube-scheduler**
- отвечает за распределение **Pod** по **worker** узлам
- выбирает наиболее подходящий узел на основе ресурсов, политик, affinity/anti-affinity и других ограничений
1.4 **kube-controller-manager**
- запускает и управляет контроллерами - циклами, которые следят за состоянием кластера и приводят его к желаемому
- контроллеры:
	- **Node Controller** - отслеживает состояние узлов
	- **Replication Controller** - обеспечивает нужное кол-во реплик подов
	- **Endpoint Controller** - связывает **Pods** и **Services**
	- **Service Account & Token Controllers** - создают учетные записи по умолчанию
1.5 **cloud-controller-manager** опционально если кластер в облаке
- отделяет компоненты зависящие от облачного провайдера (**AWS**, **GCP**, **Azure**)
- управляет такими вещами, как балансировщики нагрузки, маршруты

---

#### Worker Nodes
worker nodes  -  это машины(виртуальные или физические), на которых запускаются контейнеризированные приложения. Каждый рабочий узел содержит следующее компоненты: 
- 1. **Kubelet**
	- агент работающий на каждом узле
	- обеспечивает связь с **контролирующей панелью**
	- отвечает за запуск, остановку, управление контейнерами внутри пода
	- следит за тем чтобы контейнер работал в соответсвии с описанием PodSpec
- 2. **Kube-proxy**
	- сетевой прокси работающий на каждом узле
	- обеспечивает сетевую связность для Services(**ClusterIP**,**NodePort**)
	- реализует правила и балансировщики между подами
- 3.**Container Runtime**
	- среда выполнения контейнеров
	- поддерживаемые runtime: **containerd**,**CRI-O**,**Docker**(через Shim, версия 1.24 устарела)
	- отвечает за запуск и управление контейнерами
---
### Дополнительные компоненты (но часто используемые)
- CNI (Container Network Interface) - плагины для настройки сетевой модели Pod (Calico, Flannel, Cilium)
- Ingress Controller - управляет внешним доступом [[HTTP]]/[[HTTPS]] доступам к сервисам
- DNS (обычно CoreDNS) - обеспевчивает разрешение имен внутри кластеров
- Storage Drivers / CSI - драйверы для работы с внешними системами хранения (Persistent Volumes)

----

```
+-----------------------------+
|       Control Plane         |
|-----------------------------|
| kube-apiserver              |
| etcd                        |
| kube-scheduler              |
| kube-controller-manager     |
| cloud-controller-manager(*) |
+-----------------------------+
           ↑ (API)
+-------------------+     +-------------------+     +-------------------+
|   Worker Node 1   |     |   Worker Node 2   | ... |   Worker Node N   |
|-------------------|     |-------------------|     |-------------------
| kubelet           |     | kubelet           |     | kubelet           
| kube-proxy        |     | kube-proxy        |     | kube-proxy        
| containerd        |     | containerd        |     | containerd        
| Pods (контейнеры) |     | Pods (контейнеры) |     | Pods (контейнеры) 
+-------------------+     +-------------------+     +-------------------
```
----

## 2 вопрос

Что значит `$@, $!, $?, $$` в bash?
`$@` - все аргументы
`$!` - последний запущенный фоновый процесс
`$?` - код возврата 0-успех
`$$` - текущий PID

----

#### 29.10.2025

#### Интерфейсы портативных операционных систем POSIX

**портативность** - относится к исходному коду, а не к бинарным файлам, которые собираются из исходного кода. Это означает  что программы написанные с соблюдением стандартов **POSIX**, могут быть скомпилированны и запущены на различных ОС

**Интерфейс** - способ взаимодействия вашего кода с системой. **POSIX** определяет общий интерфейс который описывает, как программы должны взаимодействовать с системой

ключевые аспекты **POSIX**
- **Семафоры** - механизм для синхронизации процессов и разделения ресурсов
- **управление потоками** - стандарт для работы с потоками, синхронизации и управления ими

----

#### где хранятся данные об именах файлов директорий

хранятся в информационной структуре каталогов

---

#### как посмотреть и примонтировать FS

`mount` - все ФС
`mount -t ext4` - покажет ext4 ФС

```bash
sudo mkdir -p /media/usb
sudo mount /dev/sdd1 /media/usb
```

---

#### **Что такое iowait и почему он может появляться?**

iowait - показатель связанный с тем сколько времени процессор простаивает в ожидании ввода-вывода I/O
-> тоесть, пока диск,сеть, и другие устройства завершат работу

Пример:
```bash
cat hugefile > /dev/null
```
-> программа читает большой файл

----

