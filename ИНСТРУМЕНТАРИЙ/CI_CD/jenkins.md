jenkins - сервер автоматизации с открытым исходным кодом, созданный для того чтобы упростить и ускорить ci/cd процесс

jenkins автоматизирует
- сборку кода
- тестирование
- развертывание
- анализ качества кода
- доставку артефактов


| термин             | описание                                                                                    |
| ------------------ | ------------------------------------------------------------------------------------------- |
| job                | основная единица работы jenkins - набор шагов, которые он выполняет (сборка, тесты, деплой) |
| pipeline (конвеер) | современный способ описать CI/CD процесс с помощью кода (`jenkinsfile`)                     |
| Node / Agent       | машина на которой выполняются задачи. Jenkins master Controller, управляет агентами         |
| Executor           | поток выполнения задач на агенте. один агент может запускать несколько задач парарельно     |
| Plugin             | расширение добавляющее новые функции                                                        |

---

##### архитектура Jenkins
1. Controller (Master) - управляет всем процессом
	- принимает jobs
	- распределяет их на агенты
	- отображает веб-интерфейс
2. Agents - выполняют сборки, тесты

Jenkins можно настроить так чтобы агенты запускались:
- на отдельных серверах (ssh, Docker, K8s)
- динамически, например через облако

----

### Jenkinsfile

Главная фишка - Pipeline-as-Code PaC
весь процесс CI/CD описывается прямо в коде репозитория в файле `jenkinsfile`

пример простого `Jenkinsfile`:
```jenkinsfile
pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                echo 'Собираем проект...'
                sh 'go build ./...'
            }
        }
        stage('Test') {
            steps {
                echo 'Запускаем тесты...'
                sh 'go test ./...'
            }
        }
        stage('Deploy') {
            steps {
                echo 'Деплой на сервер...'
                sh './deploy.sh'
            }
        }
    }
}
```

----
##### плагины

**Git Plugin** - интеграция с Github/GitLab
**Docker Plugin** - запуск задач в контейнерах
**Pipeline Plugin** - поддержка Jenkinsfile
**Blue Ocean** - красивый UI для пайплайнов
**Credentials Plugin** - хранение токенов и паролей
**Slack/Telegram Notifier** - уведомления в тг

##### преимущества Jenkins
- бесплатный и open-source
- большое сообщество и тысячи плагинов
- гибкая настройка (GUI + код)
- поддержка почти всех языков и платформ

##### недостатки
- Интерфейс и настройка могут быть сложными
- много ручной конфигурации
- иногда требуется доработка плагинов
- не такая облачная архитектура как у GitHub Actions или GitLab CI
##### Где применяется

- Сборка Go/Java/Python проектов.    
- Автоматический деплой Docker контейнеров.
- Интеграция с Kubernetes (через плагин).
- Создание собственных CI/CD конвейеров для микросервисов.

----

#### как работает Deploy
1. **Контроллер (Master)** получает задачу (`job` или `pipeline`).
2. Он выбирает подходящий **агент** (node) для выполнения.
3. На агенте Jenkins:    
    - скачивает код из репозитория (`git clone`),
    - выполняет команды (`sh`, `ansible`, `kubectl`, `docker`, и т.п.). 
4. Если деплой успешен — Jenkins отмечает stage как ✅, иначе ❌.


| Тип агента                        | Где работает                             | Пример использования                 |
| --------------------------------- | ---------------------------------------- | ------------------------------------ |
| **Локальный (built-in)**          | На самом сервере Jenkins                 | Простая установка, без распределения |
| **SSH агент**                     | Подключается по SSH к другому серверу    | Деплой на staging/production         |
| **Docker агент**                  | Jenkins запускает контейнеры динамически | Изоляция окружений                   |
| **Kubernetes агент**              | Pod в кластере K8s создаётся под задачу  | Масштабируемые пайплайны             |
| **Windows агент (Jenkins Slave)** | Windows Server с Jenkins Agent           | Сборка .NET приложений               |
