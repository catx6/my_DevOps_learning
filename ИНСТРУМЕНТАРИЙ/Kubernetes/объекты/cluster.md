кластер - это набор серверов физических или виртуальных
которые запускают контейнеризированные приложения
кластер делится на 2 типа узлов
1. Control Plane (Master Node)
- принимает решения что и где запускать
- следит за состоянием кластера
- обрабатывает API-запросы (kubectl)
- перезапускает упавшие поды
1. Worker Nodes
- рабочее место для [[Pod]]

---

### архитектура
1. kube-apiserver
главный вход в кластер
- все команды [[kubectl]]
- все компоненты общаются только через kube-apiserver

2. etcd
- key-value база данных
- хранит всё состояние кластера
Если потеряешь etcd - потеряешь кластер

3. kube-scheldure
Определяет на какой ноде запустить под
- смотрит ресурсы CPU/RAM
- смотрит на nodeSelector, taints,tolerations, affinity

4. kube-controller-manager
следит, чтобы состояние соответствует желаемому
- ReplicaSet controller
- Node controller
- Job controller

---

#### Worker Node компоненты

1. kubelet
Агент, который запускает контейнеры и общается с кубером
- получает инструкции от api-server
- запускает контейнеры через container runtime
как мини-менеджер ноды

1. kube-proxy
отвечает за сетевые правила
- iptables/ipvs
- сервисы
- балансировка трафика

1. Container Runtime
обычно:
- containerd
- CRI-O
- Docker (deprecated в чистом виде)
это то что реально запускает контейнер

---

#### что важно понимать DevOps инженеру

- как состоят узлы и за что кто отвечают
- как работает расписание подов (schelduler)
- как хранится состояние (etcd)