kubernetes (k8s) - —Å–∏—Å—Ç–µ–º–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

 - –æ–ø–∏—Å–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∫–ª–∞—Å—Ç–µ—Ä–∞ `kubernetes`
1. control panel
—É–ø—Ä–∞–≤–ª—è—é—â–∞—è –ø–ª–æ—Å–∫–æ—Å—Ç—å - –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞ –æ–±—ã—á–Ω–æ —è–≤–ª—è—é—Ç—Å—è `master` —É–∑–ª–æ–º
–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã **Control panel:**
1.1 **kube-apiserver**
- –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä
- –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç REST-–∑–∞–ø—Ä–æ—Å—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º
- –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ API (Pods, Services  –∏ —Ç.–¥)
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç—É–±–∏—Ä—É–µ–º—ã–π
1.2 **etcd**
- —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ
- —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞(–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –∏ —Ç.–¥)
- —è–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω–Ω—ã –¥–ª—è –≤—Å–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
1.3 **kube-scheduler**
- –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ **Pod** –ø–æ **worker** —É–∑–ª–∞–º
- –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —É–∑–µ–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ—Å—É—Ä—Å–æ–≤, –ø–æ–ª–∏—Ç–∏–∫, affinity/anti-affinity –∏ –¥—Ä—É–≥–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
1.4 **kube-controller-manager**
- –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ - —Ü–∏–∫–ª–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–µ–¥—è—Ç –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –ø—Ä–∏–≤–æ–¥—è—Ç –µ–≥–æ –∫ –∂–µ–ª–∞–µ–º–æ–º—É
- –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:
	- **Node Controller** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É–∑–ª–æ–≤
	- **Replication Controller** - –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω—É–∂–Ω–æ–µ –∫–æ–ª-–≤–æ —Ä–µ–ø–ª–∏–∫ –ø–æ–¥–æ–≤
	- **Endpoint Controller** - —Å–≤—è–∑—ã–≤–∞–µ—Ç **Pods** –∏ **Services**
	- **Service Account & Token Controllers** - —Å–æ–∑–¥–∞—é—Ç —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
1.5 **cloud-controller-manager** –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –µ—Å–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä –≤ –æ–±–ª–∞–∫–µ
- –æ—Ç–¥–µ–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (**AWS**, **GCP**, **Azure**)
- —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–∞–∫–∏–º–∏ –≤–µ—â–∞–º–∏, –∫–∞–∫ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏, –º–∞—Ä—à—Ä—É—Ç—ã

---

#### Worker Nodes
worker nodes  -  —ç—Ç–æ –º–∞—à–∏–Ω—ã(–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∏–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ), –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ö–∞–∂–¥—ã–π —Ä–∞–±–æ—á–∏–π —É–∑–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: 
- 1. **Kubelet**
	- –∞–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ
	- –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–≤—è–∑—å —Å **–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â–µ–π –ø–∞–Ω–µ–ª—å—é**
	- –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–ø—É—Å–∫, –æ—Å—Ç–∞–Ω–æ–≤–∫—É, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–∞
	- —Å–ª–µ–¥–∏—Ç –∑–∞ —Ç–µ–º —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–ª –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å–≤–∏–∏ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º PodSpec
- 2. **Kube-proxy**
	- —Å–µ—Ç–µ–≤–æ–π –ø—Ä–æ–∫—Å–∏ —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ
	- –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–µ—Ç–µ–≤—É—é —Å–≤—è–∑–Ω–æ—Å—Ç—å –¥–ª—è Services(**ClusterIP**,**NodePort**)
	- —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏ –º–µ–∂–¥—É –ø–æ–¥–∞–º–∏
- 3.**Container Runtime**
	- —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
	- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ runtime: **containerd**,**CRI-O**,**Docker**(—á–µ—Ä–µ–∑ Shim, –≤–µ—Ä—Å–∏—è 1.24 —É—Å—Ç–∞—Ä–µ–ª–∞)
	- –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–ø—É—Å–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
---
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–Ω–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ)
- CNI (Container Network Interface) - –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–µ–≤–æ–π –º–æ–¥–µ–ª–∏ Pod (Calico, Flannel, Cilium)
- Ingress Controller - —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–Ω–µ—à–Ω–∏–º –¥–æ—Å—Ç—É–ø–æ–º [[HTTP]]/[[HTTPS]] –¥–æ—Å—Ç—É–ø–∞–º –∫ —Å–µ—Ä–≤–∏—Å–∞–º
- DNS (–æ–±—ã—á–Ω–æ CoreDNS) - –æ–±–µ—Å–ø–µ–≤—á–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–º–µ–Ω –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
- Storage Drivers / CSI - –¥—Ä–∞–π–≤–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è (Persistent Volumes)

----

```
+-----------------------------+
|       Control Plane         |
|-----------------------------|
| kube-apiserver              |
| etcd                        |
| kube-scheduler              |
| kube-controller-manager     |
| cloud-controller-manager(*) |
+-----------------------------+
           ‚Üë (API)
+-------------------+     +-------------------+     +-------------------+
|   Worker Node 1   |     |   Worker Node 2   | ... |   Worker Node N   |
|-------------------|     |-------------------|     |-------------------
| kubelet           |     | kubelet           |     | kubelet           
| kube-proxy        |     | kube-proxy        |     | kube-proxy        
| containerd        |     | containerd        |     | containerd        
| Pods (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) |     | Pods (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) |     | Pods (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) 
+-------------------+     +-------------------+     +-------------------

```
---
#### –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

**—É–∑–µ–ª ([[node]])** - —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –∏–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞, —Ä–∞–±–æ—á–∏—è –µ–¥–∏–Ω–∏—Ü–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ, –∫–∞–∂–¥—ã–π —É–∑–µ–ª —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `control panel`

**[[Pod]]** - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤ K8s, –æ–±–µ—Ä—Ç–∫–∞ **–æ–¥–Ω–æ–≥–æ** –∏–ª–∏ **–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** –≤—Å–µ –≤–æ–∫—Ä—É–≥ **Pod** –¥–µ–ª—è—Ç –æ–¥–Ω—É —Å–µ—Ç—å –∏ —Ä–µ—Å—É—Ä—Å—ã

**[[cluster]]** - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑ **Master** –∏ **Worker Nodes**

**[[Service]]** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ Pod (–ø–æ IP, DNS, –ø–æ—Ä—Ç—É) –¥–µ–ª–∞–µ—Ç –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏

**[[Deployment]]** - –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–∫ –∏ —Å–∫–æ–ª—å–∫–æ –ø–æ–¥–æ–≤ –∑–∞–ø—É—Å—Ç–∏—Ç—å. k8s —Å–ª–µ–¥–∏—Ç —á—Ç–æ–±—ã –Ω—É–∂–Ω–æ–µ –∫–æ–ª-–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–ª–æ

**[[Namespace]]** - –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ - —É–¥–æ–±–Ω–æ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏–ª–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π

**[[ConfigMap]] / [[Secret]]** - —Ö—Ä–∞–Ω—è—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ base64)

**[[Ingress]]** - –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–∏—Å–∞–º (http/https, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)

**[[–ò–ù–°–¢–†–£–ú–ï–ù–¢–ê–†–ò–ô/Kubernetes/–æ–±—ä–µ–∫—Ç—ã/Volume]] / PersistentVolume (PV)** - –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏—Å—á–µ–∑–Ω—É—Ç

**[[ReplicaSet]]** - –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç,—á—Ç–æ –∫–æ–ª-–≤–æ –ø–æ–¥–æ–≤ –±—É–¥–µ—Ç –≤—Å–µ–≥–¥–∞ –∑–∞–ø—É—â–µ–Ω–æ. **Deployment** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **ReplicaSet** –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

**[[Daemonset]]** - –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ –æ–¥–Ω–æ–º—É **–ø–æ–¥—É** –Ω–∞ –∫–∞–∂–¥—ã–π **—É–∑–µ–ª**, –Ω–∞–ø—Ä–∏–º–µ—Ä –∞–≥–µ–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**[[StatefulSet]]** - –∫–∞–∫ **Deployment**, –Ω–æ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≥–¥–µ –≤–∞–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è(–Ω–∞–ø—Ä–∏–º–µ—Ä: –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)

---

### –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ü–µ–ª–æ–º

1. —è –æ–ø–∏—Å—ã–≤–∞—é –∂–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ YAML-–º–∞–Ω–∏—Ñ–µ—Å—Ç–∞—Ö
2. kubernetes –ø—Ä–º–∏–µ–Ω—è–µ—Ç —ç—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ –∫ –∫–ª–∞—Å—Ç–µ—Ä—É
3. –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å–ª–µ–¥—è—Ç —á—Ç–æ–±—ã —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–≤–ø–∞–¥–∞–ª–æ —Å –∂–µ–ª–∞–µ–º—ã–º:
	- –ï—Å–ª–∏ Pod —É–ø–∞–ª -> —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π
	- –µ—Å–ª–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –º–∞–ª–æ -> –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—Å—è
	- –µ—Å–ª–∏ –≤—ã—à–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ -> –ø–ª–∞–≤–Ω–æ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
---
#### –ø—Ä–∏–º–µ—Ä –º–∏–Ω–∏-–º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: my-app
  template:
    metadata:
      labels:
        app: my-app
    spec:
      containers:
        - name: my-container
          image: nginx:latest
          ports:
            - containerPort: 80
```
-> –∑–∞–ø—É—Å–∫ 3 –ø–æ–¥–æ–≤ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º `nginx`

----

### –æ–±—â–∞—è —Ü–µ–ª—å kind, minikube, k3s
–í—Å–µ 3 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ - —Å–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞ kubernetes –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –∏–ª–∏ –≤ –ª–µ–≥–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö, –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ–Ω–∏ –ø–æ –ø–æ–¥—Ö–æ–¥—É –∏ —Ä–µ—Å—É—Ä—Å–∞–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
-> –ø–æ—á–µ–º—É –∑–∞–ø—É—Å—Ç–∏—Ç—å k8s –ª–æ–∫–∞–ª—å–Ω–æ **–æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ** –Ω–∞ –º–∞—à–∏–Ω–µ:
- k8s —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è **master –∏ worker** –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∏–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö
- —Å–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ —Ä–µ—Å—É—Ä—Å–∞–º

---

### kind
kind = kubernetes in Docker
- –∫–∞–∂–¥—ã–π **Node** –∫–ª–∞—Å—Ç–µ—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –æ—á–µ–Ω—å –ª–µ–≥–∫–∏–π –∏ –±—ã—Å—Ç—Ä—ã–π –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏ CI/CD
- —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è CI-–ø–∞–π–ø–ª–∞–π–Ω–æ–≤

–ü–ª—é—Å—ã:
- —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `kind create cluster`
- –æ—á–µ–Ω—å –ª–µ–≥–∫–∏–π –∏ –±—ã—Å—Ç—Ä—ã–π
- –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è CI —Ç–µ—Å—Ç–æ–≤
–ú–∏–Ω—É—Å—ã:
- –Ω–µ –¥–ª—è –ø—Ä–æ–¥–∞
- —Ç—Ä–µ–±—É–µ—Ç Docker
–ü—Ä–∏–º–µ—Ä:
```bash
kind create cluster --name my-name
```
---
#### Minikube
Minikube - —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Å–ø–æ—Å–æ–± –ª–æ–∫–∞–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å k8s
- —Å–æ–∑–¥–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É (KVM, Docker, VirtualBox)
- –≤–Ω—É—Ç—Ä–∏ –Ω–µ–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π kubernetes-–∫–ª–∞—Å—Ç–µ—Ä (1 Node –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)
- –ò–¥–µ–∞–ª—å–Ω—ã–π –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –æ–±—É—á–µ–Ω–∏—è –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
–ü–ª—é—Å—ã:
- —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–Ω–∞—Å—Ç–æ—è—â–∏–π** kubernetes
- –µ—Å—Ç—å —É–¥–æ–±–Ω—ã–π –∫–æ–º–∞–Ω–¥—ã `minikube dashboard`, `minikube addons`
- —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ Docker (—á–µ—Ä–µ–∑ VM)
–ú–∏–Ω—É—Å—ã:
- —Ç—è–∂–µ–ª–µ–µ kind
- –¥–æ–ª—å—à–µ –∑–∞–ø—É—Å–∫ –∏ –±–æ–ª—à–µ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
–ü—Ä–∏–º–µ—Ä:
```bash
minikube start
minikube dashboard
```
---

### K3s
k3s - kubernetes –æ—Ç *rancher Labs*, –æ–±–ª–µ–≥—á–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
- –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å–±–æ—Ä–∫–∞ k8s (–≤—Å–µ –≤ –æ–¥–Ω–æ–º –±–∏–Ω–∞—Ä–Ω–∏–∫–µ ~100–ú–±)
- –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è **edge-—É—Å—Ç—Ä–æ–π—Å—Ç–≤, IoT, Raspberry Pi, –º–∏–Ω–∏-—Å–µ—Ä–≤–µ—Ä–æ–≤**
- –æ—á–µ–Ω—å –ø–æ–ø—É–ª—è—Ä–µ–Ω –¥–ª—è **–ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω–∞ —Å–ª–∞–±–æ–º –∂–µ–ª–µ–∑–µ**
–ø–ª—é—Å—ã:
- –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –º–∞–ª–æ —Ä–µ—Å—É—Ä—Å–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –Ω–∞ 512–ú–ë RAM)
- —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (`curl -sfL https://get.k3s.io | sh -`)
- –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å Kubernetes API
–º–∏–Ω—É—Å—ã:
- —É—Ä–µ–∑–∞–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–Ω–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö –∞–¥–¥–æ–Ω-–ø–ª–∞–≥–∏–Ω–æ–≤)
- –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö enterprise-–∫–ª–∞—Å—Ç–µ—Ä–æ–≤
–ü—Ä–∏–º–µ—Ä:
```
kubectl get nodes
```

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞                 | **Kind**        | **Minikube**         | **K3s**                   |
| ------------------------------ | --------------- | -------------------- | ------------------------- |
| –ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç                   | –í Docker        | –í VM / Docker        | –ù–∞ Linux / ARM / IoT      |
| –†–µ—Å—É—Ä—Å—ã                        | –û—á–µ–Ω—å –º–∞–ª–æ      | –°—Ä–µ–¥–Ω–µ               | –û—á–µ–Ω—å –º–∞–ª–æ                |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ                  | CI, —Ç–µ—Å—Ç—ã       | –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | Edge / –º–∞–ª–æ–º–æ—â–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã |
| –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞        | ‚ùå –ù–µ—Ç           | ‚ùå –ù–µ—Ç                | ‚úÖ –î–∞ (–Ω–∞ —Å–ª–∞–±–æ–º –∂–µ–ª–µ–∑–µ)   |
| –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞               | ‚ö° –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è | üê¢ –ú–µ–¥–ª–µ–Ω–Ω–∞—è         | ‚ö° –ë—ã—Å—Ç—Ä–∞—è                 |
| –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å API Kubernetes | ‚úÖ –ü–æ–ª–Ω–∞—è        | ‚úÖ –ü–æ–ª–Ω–∞—è             | ‚úÖ –ü–æ—á—Ç–∏ –ø–æ–ª–Ω–∞—è            |

----

### minikube
minikube - —É—Ç–∏–ª–∏—Ç–∞ –ø–æ–¥–Ω–∏–º–∞—é—â–∞—è –∫–ª–∞—Å—Ç–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è –¥—Ä–∞–π–≤–µ—Ä docker, kvm, VirtualBox

1. —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
	- [[kubectl]] - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –∫–ª–∞—Å—Ç–µ—Ä–æ–º
	- minikube - —Å–∞–º –º–µ–Ω–µ–¥–∂–µ—Ä
	- –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è - docker –∏–ª–∏ VM
2. `minikube start --driver=docker`
3. `minikube status`
4. `kubectl get nodes` –∏–ª–∏ `kubectl get pods -A`
5. `kubectl create deployment nginx --image=nginx` - —Å–≤–æ–π pod
6. `kubectl expose deployment nginx --type=NodePort --port=80` - service –ø–æ—Ä—Ç—ã
7. `minikube service nginx --url` - —É–∑–Ω–∞—Ç—å –∞–¥—Ä–µ—Å
8. `minikube dashboard` - –¥—ç—à–±–æ—Ä–¥

----

### –ø—Ä–æ –∫—É–±–µ—Ä
–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø–æ–¥–∞ 
- `kubectl logs <pod-name>` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø–æ–¥–∞
- `kubectl logs <pod-name> -c <container name>` - –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É–∫–∞–∑–∞–Ω–æ–≥–æ –ø–æ–¥–∞


–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ endpoint –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ Kubernetes?
- `kubectl exec -it <pod> -- curl http://<service>:<port>`


–ß—Ç–æ —Ç–∞–∫–æ–µ PodSecurityPolicy (PSP) –≤ Kubernetes?
- **PodSecurityPolicy (PSP)** ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç Kubernetes, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ–¥–æ–≤**:
	- –∫–∞–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã;
	- –∫–∞–∫–∏–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É —Ä–∞–∑—Ä–µ—à–µ–Ω—ã;
	- –º–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã;
	- –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Å–µ—Ç–µ–≤—ã–µ –∏ –¥—Ä—É–≥–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.

–ö–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å Deployment –≤ Kubernetes?
- —á–µ—Ä–µ–∑ YAML –º–∞–Ω–∏—Ñ–µ—Å—Ç
```yaml
spec:
	replicas: 5
```
–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å `kubectl apply -f deployment.yaml`
- –∫–æ–º–∞–Ω–¥–æ–π –Ω–∞–ø—Ä—è–º—É—é
```yaml
kubectl scale deployment <name-deployment> --replicas 5
```

[[–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ]]