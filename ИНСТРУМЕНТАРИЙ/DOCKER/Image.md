Docker Image - —ç—Ç–æ —à–∞–±–ª–æ–Ω (**snapshot**) —Å–æ–¥–µ—Ä–∂–∞—â–∏–π
- –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: `alpine`, `ubuntu`, `debian`)
- –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ 
- –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
docker pull nginx:latest
docker run -d -p 8080:80 nginx
```

----

#### –∏–∑ —á–µ–≥–æ —Å–æ—Å—Ç–æ–∏—Ç –æ–±—Ä–∞–∑
–û–±—Ä–∞–∑ - –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (layered filesystem)
–∫–∞–∂–¥—ã–π —Å–ª–æ–π - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏–∑ [[DockerFile]]

```dockerfile
FROM ubuntu:22.04
RUN apt update && apt install -y python3
COPY app.py /app/app.py
CMD ["python3", "/app/app.py"]
```
 - –ø—Ä–∏ —Å–±–æ—Ä–∫–µ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–ª–æ–∏
1. –û–° –¥–ª—è –∑–∞–ø—É—Å–∫–∞
2. —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Ç.–¥
3. —Å–ª–æ–π —Å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –æ–±—Ä–∞–∑
4. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞

---

### –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç –æ–±—Ä–∞–∑—ã

–ü–æ-—É–º–æ–ª—á–∞–Ω–∏—é –≤ `/var/lib/docker/overlay2/` —Ç—É—Ç Docker —Ö—Ä–∞–Ω–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ —Å–ª–æ–∏

—Å–ø–∏—Å–æ–∫ –æ–±—Ä–∞–∑–æ–≤:
```bash
docker images
```
—É–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑:
```bash
docker rmi <image_id>
```

---

### –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å –æ–±—Ä–∞–∑–∞–º–∏

| –ö–æ–º–∞–Ω–¥–∞                            | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                         |
| ---------------------------------- | ---------------------------------- |
| `docker pull <image>`              | —Å–∫–∞—á–∞—Ç—å –æ–±—Ä–∞–∑ –∏–∑ [[Docker Hub]]    |
| `docker images`                    | —Å–ø–∏—Å–æ–∫ –æ–±—Ä–∞–∑–æ–≤                     |
| `docker rmi <image>`               | —É–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑                      |
| `docker inspect <image>`           | –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑–∞       |
| `docker history <image>`           | –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–ª–æ–µ–≤           |
| `docker save -o fire.tar <image>`  | —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑ –≤ —Ñ–∞–π–ª        |
| `docker load -i file.tar`          | –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑ –∏–∑ —Ñ–∞–π–ª–∞       |
| `docker tag <image> repo/name:tag` | –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å/–ø–µ—Ä–µ—Ç–µ–≥–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑ |
| `docker push`                      | –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞–∑ –≤ Docker Registry  |

----

### –í–∏–¥—ã –æ–±—Ä–∞–∑–æ–≤


| —Ç–∏–ø                           | –ø—Ä–∏–º–µ—Ä                         | –æ–ø–∏—Å–∞–Ω–∏–µ                                  |
| ----------------------------- | ------------------------------ | ----------------------------------------- |
| –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π                   | `nginx`, `ubuntu`, `python`    | –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç [[Docker Hub]]               |
| —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π (custom)          | app:1.0                        | —Å–æ–±—Ä–∞–Ω —á–µ—Ä–µ–∑ [[DockerFile]]               |
| –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π(multi-stage) | `From golang` -> `FROM alpine` | –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–µ–∑ —Å–±–æ—Ä–æ—á–Ω—ã—Ö –∞—Ä—Ç–∏—Ñ–∞–∫—Ç–æ–≤ |
| –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π                   | `alpine`, `scratch`            | –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, CI/CD                  |

----

###  –≤ –∫–∞–∫–æ–º –≤–∏–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –æ–±—Ä–∞–∑—ã

Docker –æ–±—Ä–∞–∑—ã - —ç—Ç–æ –Ω–∞–±–æ—Ä —Å–ª–æ–µ–≤ —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ .tar c –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤ JSON
–ö–æ–≥–¥–∞ Docker —Ç—è–Ω–µ—Ç –æ–±—Ä–∞–∑ (`docker pull`) –æ–Ω —Å–∫–∞—á–∏–≤–∞–µ—Ç:
- —Ñ–∞–π–ª—ã —Å–ª–æ—ë–≤ (`layer.tar`)
- –º–∞–Ω–∏—Ñ–µ—Å—Ç (`manifest.json`)
- –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (`config.json`)


–ø—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
```hs
/var/lib/docker/overlay2/
‚îú‚îÄ‚îÄ <layer_id>/
‚îÇ   ‚îú‚îÄ‚îÄ diff/         ‚Üê —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ª–æ—è
‚îÇ   ‚îú‚îÄ‚îÄ lower/        ‚Üê —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–ª–æ–∏
‚îÇ   ‚îú‚îÄ‚îÄ work/         ‚Üê –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ merged/       ‚Üê —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îî‚îÄ‚îÄ ...
```

üëâ –∫–∞–∂–¥—ã–π —Å–ª–æ–π - —ç—Ç–æ **–∞—Ä—Ö–∏–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π** –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ
Docker –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∏—Ö —á–µ—Ä–µ–∑ **OverlayFS** —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∏—Ç–æ–≥–æ–≤—ã–π root-—Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É 

OverlayFS - —Å–∏—Å—Ç–µ–º–∞ –æ–±—ä–µ–¥–∏–Ω–∏—è —Å–ª–æ—ë–≤ (Union filesystem) –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤ —è–¥—Ä–æ Linux
Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–µ –¥–ª—è —Å–∫–ª–µ–∏–≤–∞–Ω–∏—è read-only —Å–ª–æ–µ–≤ –≤ —Ñ—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

---

##### –ø–æ—á–µ–º—É `latest` –æ–±—Ä–∞–∑—ã –∏—Å–ø–æ–ª—å–∑–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ

–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–≥–∞ `latest` - –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

- —Ç–µ–≥ `latest` –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—Å—è –∏ –∞ —Ç–∞–∫–∂–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ –≤–µ—Ä—Å–∏—è —á—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –±–∞–≥–æ–≤
- –ø–æ—Ç–µ—Ä—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ –µ—Å–ª–∏ —Å–µ–π—á–∞—Å –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–∞–∫–∂–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö
