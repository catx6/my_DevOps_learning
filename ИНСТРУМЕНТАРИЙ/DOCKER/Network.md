docker Network - —ç—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –≤ –∫–æ—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º (—Å–µ—Ç–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –æ—Ç —Ö–æ—Å—Ç–∞ –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)

—Ç–µ–º–∞ —Å–µ—Ç–µ–π –≤ Docker —è–≤–ª—è–µ—Ç—Å—è –≤–∞–∂–Ω–æ–π –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º

---
#### —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ —è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –¥–æ–∫–µ—Ä

```bash
docker network ls
```
–ø—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```bash
NETWORK ID     NAME      DRIVER    SCOPE
d4f1b2e...     bridge    bridge    local
a8c9e1d...     host      host      local
9c8a1f3...     none      null      local
```

----

### —Ç–∏–ø—ã —Å–µ—Ç–µ–π –≤ Docker


| —Ç–∏–ø —Å–µ—Ç–∏   | –æ–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                      | –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ                             |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------- |
| **bridge** | –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π —á–µ—Ä–µ–∑ [[NAT]] - Bridge —Å–µ—Ç—å **–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è** –∏ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –≤ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –ª–æ–∫–∞–ª—å–Ω—É—é —Å–µ—Ç—å | –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞                   |
| host       | –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç—å —Ö–æ—Å—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é                                                                                                                      | –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–±–µ–∑ NAT) |
| none       | –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω **–±–µ–∑ —Å–µ—Ç–∏**                                                                                                                             | –ø–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è                        |
| overlay    | —Å–µ—Ç—å –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Ö–æ—Å—Ç–∞–º–∏(–≤ Docker Swarm –∏–ª–∏ k8s)                                                                                                            | –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö    |
| macvlan    | –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç [[MAC]]-–∞–¥—Ä–µ—Å –∫–∞–∫ —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –º–∞—à–∏–Ω–∞                                                                                                        | –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç—å—é  |

---
### bridge-—Å–µ—Ç—å

–ü–æ-—É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ —Å–µ—Ç–∏ `bridge`

```bash
docker run -d --name web nginx
docker run -d --name database mysql
```
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø–æ –∏–º–µ–Ω–∏, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –≤ –æ–¥–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–µ—Ç–∏

### —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏
—á—Ç–æ–¥–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥–ª–∏ –¥—Ä—É–∂–∏—Ç—å –ø–æ –∏–º–µ–Ω–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–≤–æ—è —Å–µ—Ç—å:
```bash
docker network create mynet
```
—Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –Ω–µ–π:
```bash
docker run -d --name web --network=mynet nginx 
docker run -d --name db --network=mynet mysql
```
—Ç–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ web –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
ping db
```
–∏–ª–∏ –≤ –∫–æ–Ω—Ñ–∏–≥–µ Nginx/Mysql –≤–µ–∑–¥–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å [[IP]] –∏–ª–∏ [[DNS]] - Docker —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º—è –∫–∞–∫ DNS

---

### –∫–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫—Ç–æ –≤ —Å–µ—Ç–∏

```bash
docker network inspect mynet
```
–≤—ã–≤–æ–¥ –ø–æ–∫–∞–∂–µ—Ç Ip –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –∏—Ö –∏–º–µ–Ω–∞

----

#### –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–µ—Ç—è–º

–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å —á–ª–µ–Ω–æ–º –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ç–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

```bash
docker network create backend 
docker network create database

docker run --name app --network=backend nginx
docker network connect database app
```
—Ç–µ–ø–µ—Ä—å `app` –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –∏–∑ backend –∏ –∏–∑ database

---

#### –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ (Forwading ports)
—á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—ã–ª –≤–∏–¥–µ–Ω –≤–Ω–µ Docker –Ω—É–∂–µ–Ω –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞:
```bash
docker run -d -p 8080:80 nginx
```
-> –ø–æ—Ä—Ç 80 –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `localhost:8080`

---
### host network

```bash
docker run --network=host nginx
```
–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ —Ö–æ—Å—Ç–∞ - –±–µ–∑ [[NAT]] 
–∏–∑–æ–ª—è—Ü–∏–∏ –Ω–µ—Ç—É –∏ –ø–æ—Ä—Ç—ã –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å

----

#### None network - –ø–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è

```bash
docker run --network=none nginx
```
–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑ —Å–µ—Ç–∏ - –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö sandbox —Ç–µ—Å—Ç–æ–≤

----

#### overlay network
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker Swarm –∏ kubernetes
–ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö/–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö –æ–±—â–∞—Ç—å—Å—è –ø–æ –æ–¥–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
```bash
docker network create -d overlay my_overlay
```
-> –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ `–ê` –º–æ–∂–µ—Ç –ø–∏–Ω–≥–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ `–ë`


| –∫–æ–º–∞–Ω–¥–∞                        | –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ           |
| ------------------------------ | -------------------- |
| `docker network ls`            | –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å–µ—Ç–∏    |
| `inspect <name>`               | –¥–µ—Ç–∞–ª–∏ —Å–µ—Ç–∏          |
| `create <name>`                | —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ç—å         |
| `rm <name>`                    | —É–¥–∞–ª–∏—Ç—å —Å–µ—Ç—å         |
| `connect <net> <container>`    | –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä |
| `disconnect <net> <container>` | –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä  |

---
##### –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ç—å —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã–º —Ç–∏–ø–æ–º

```bash
docker network create --driver bridge bridge_net
docker network create --driver overlay overlay_net
docker network create --driver none none
docker network create --driver host host_net
docker network create --driver macvlan MacVlan_net
```

----

#### –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç DNS –≤–Ω—É—Ç—Ä–∏ Docker
Docker —Å–æ–∑–¥–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DNS-—Å–µ—Ä–≤–µ—Ä (127.0.0.1)
–∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä—É–µ—Ç —Å–≤–æ–µ –∏–º—è –≤ —ç—Ç–æ–π —Å–µ—Ç–∏
–ø–æ—ç—Ç–æ–º—É —Ç—ã –º–æ–∂–µ—à—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –ø–æ –µ–≥–æ –∏–º–µ–Ω–∏

-----

### –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–µ—Ç–∏
- –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
- –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å Firewall
- –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

----

#### —á—Ç–æ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å DevOps

## üìò 15. –ß—Ç–æ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å DevOps –ø—Ä–æ Docker Network

‚úÖ –ö–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å —Å–µ—Ç–∏ (`bridge`, `overlay`)  
‚úÖ –ö–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ DNS  
‚úÖ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ (`-p`)  
‚úÖ –ö–∞–∫ —Å–æ–µ–¥–∏–Ω–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã (`nginx ‚Üî backend ‚Üî db`)  
‚úÖ –ö–∞–∫ –¥–µ–±–∞–∂–∏—Ç—å (`docker exec`, `ping`, `curl`)  
‚úÖ –ö–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏  
‚úÖ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å networks –≤ `docker-compose.yml`