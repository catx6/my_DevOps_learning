Docker engine - это сердце docker а тоесть является платформой которая:
- управляет контейнерами образами сетями и томами
- обеспечивает взаимодействие между Docker CLI и ядром линукс через namespaces, cgroups, overlayFs

---

### архитектура Docker Engine


| компонент                 | описание                                                        | для чего важжно DevOps                                              |
| ------------------------- | --------------------------------------------------------------- | ------------------------------------------------------------------- |
| Docker Daemon (`dockerd`) | фоновый процесс управляющий контейнерами, образами, сетями      | ты взаимодействуешь с ним через CLI, он все выполняет               |
| Docker CLI                | Клиент - команда которую ты пишешь в терминале                  | отправляет HTTP-запросы к демону через сокет `/var/run/docker.sock` |
| Docker API(REST API)      | интерфейс между CLI и Daemon можно управлять через HTTP-запросы | позволяет DevOps писать автоматизации (CI/CD, Ansible, Terraform)   |

----

### как это работает

```bash
docker run nginx
```
1. CLI -> отправляет запрос `POST /containers/create` демону
2. Docker Daemon -> ищет образ `nginx` локально если нету тянет с [[Docker Hub]]
3. создает контейнер на основе образа
4. ядро Linux изолирует процесс через `namespaces` и `cgroups`
5. контейнер запускается как обычный процесс с ограничениями

---

#### что важно знать DevOps инженеру


| что                                      | почему важно                                                                                            |
| ---------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| `dockerd` это сервис                     | его важно диагностировать если он сразу падает через `journalctl -u dockerd` `systemctl status dockerd` |
| **Docker socket** `/var/run/docker.sock` | через него Docker CLI и CI/CD системы управляют Docker - важно следить за безопасностью                 |
| Storage drivers (overlay2, aufs, btrfs)  | определяют как хранятся слои                                                                            |
| network drivers                          | понимание сетей                                                                                         |
| Docker API / Remote management           | позволяет автоматизировать деплой через REST или Ansible                                                |
| Rootless Docker                          | безопасный запуск Docker без root доступа (актуально для прода)                                         |

Docker Engine = CLI + API + Daemon Docker

